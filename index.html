<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Sync Tool - ArUco Stopwatch Synchronization</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üé¨ Video Synchronization Tool</h1>
            <p class="subtitle">ArUco Marker & Stopwatch-based Video Sync</p>
        </header>

        <nav class="tabs">
            <button class="tab-btn active" data-tab="stopwatch">Live Stopwatch</button>
            <button class="tab-btn" data-tab="sync">Video Sync</button>
        </nav>

        <!-- Tab 1: Live Stopwatch -->
        <div id="stopwatch-tab" class="tab-content active">
            <div class="stopwatch-container">
                <div class="stopwatch-display" id="stopwatch-canvas-container">
                    <canvas id="stopwatch-canvas" width="1200" height="800"></canvas>
                </div>
                <div class="stopwatch-controls">
                    <button id="start-btn" class="btn btn-primary">Start</button>
                    <button id="pause-btn" class="btn btn-secondary" disabled>Pause</button>
                    <button id="reset-btn" class="btn btn-danger">Reset</button>
                </div>
                <div class="info-box">
                    <h3>üìå How to Use</h3>
                    <ul>
                        <li>Display this stopwatch on your screen while recording</li>
                        <li>ArUco markers in corners help identify the stopwatch area</li>
                        <li>Record with your cameras to capture the stopwatch</li>
                        <li>Use the Video Sync tab to synchronize your recordings</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Tab 2: Video Sync -->
        <div id="sync-tab" class="tab-content">
            <div class="upload-section">
                <h2>Upload Videos</h2>
                <div class="upload-grid">
                    <div class="upload-box">
                        <label for="video-a">Video A</label>
                        <input type="file" id="video-a" accept="video/*" />
                        <div id="preview-a" class="video-preview"></div>
                    </div>
                    <div class="upload-box">
                        <label for="video-b">Video B</label>
                        <input type="file" id="video-b" accept="video/*" />
                        <div id="preview-b" class="video-preview"></div>
                    </div>
                </div>
                <button id="process-btn" class="btn btn-primary btn-large" disabled>
                    Process & Synchronize Videos
                </button>
            </div>

            <div id="processing-section" class="processing-section" style="display: none;">
                <h2>Processing...</h2>
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
                <p id="progress-text" class="progress-text">Initializing...</p>
            </div>

            <div id="results-section" class="results-section" style="display: none;">
                <h2>Synchronization Results</h2>
                
                <div class="results-grid">
                    <div class="result-card">
                        <h3>Video A Analysis</h3>
                        <div id="video-a-stats"></div>
                    </div>
                    <div class="result-card">
                        <h3>Video B Analysis</h3>
                        <div id="video-b-stats"></div>
                    </div>
                </div>

                <div class="sync-info">
                    <h3>Synchronization Info</h3>
                    <div id="sync-stats"></div>
                </div>

                <div class="sync-visualization">
                    <h3>Synchronized Playback</h3>
                    <div class="video-players">
                        <div class="player-container">
                            <h4>Video A</h4>
                            <video id="synced-video-a" controls></video>
                            <p id="time-a" class="time-display">Time: 0.00s</p>
                        </div>
                        <div class="player-container">
                            <h4>Video B</h4>
                            <video id="synced-video-b" controls></video>
                            <p id="time-b" class="time-display">Time: 0.00s</p>
                        </div>
                    </div>
                    <div class="playback-controls">
                        <button id="sync-play" class="btn btn-primary">‚ñ∂ Play Synchronized</button>
                        <button id="sync-pause" class="btn btn-secondary">‚è∏ Pause</button>
                        <button id="sync-reset" class="btn btn-secondary">‚èÆ Reset</button>
                    </div>
                    <div class="sync-offset-display">
                        <p id="offset-info">Sync Offset: <span id="offset-value">0.000s</span></p>
                    </div>
                </div>

                <div class="timestamp-data">
                    <h3>Detected Timestamps</h3>
                    <div class="timestamp-grid">
                        <div class="timestamp-column">
                            <h4>Video A Timestamps</h4>
                            <div id="timestamps-a" class="timestamp-list"></div>
                        </div>
                        <div class="timestamp-column">
                            <h4>Video B Timestamps</h4>
                            <div id="timestamps-b" class="timestamp-list"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer>
            <p>Built with ‚ù§Ô∏è using ArUco markers and OCR technology | 
            <a href="https://github.com/yourusername/video-sync-app" target="_blank">GitHub</a></p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/opencv.js@4.8.0/opencv.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5.0.0/dist/tesseract.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
